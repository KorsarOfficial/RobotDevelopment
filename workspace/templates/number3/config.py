#!/usr/bin/env python
# -*- coding: utf-8 -*-

"""
Файл конфигурации для примера интеграции робота с компьютерным зрением.
"""

# Режим эмуляции (True - для симуляции, False - для реального робота)
EMULATION_MODE = True

# Параметры подключения к роботу
ROBOT_IP = "192.168.31.101"
ROBOT_PORT = 5000

# Параметры движения робота
MAX_SPEED = 50  # максимальная скорость движения робота (% от максимальной)
MAX_ACCELERATION = 50  # максимальное ускорение робота (% от максимального)

# Параметры захвата
GRIPPER_OPEN_POSITION = 0  # позиция открытого захвата (0-100%)
GRIPPER_CLOSED_POSITION = 100  # позиция закрытого захвата (0-100%)

# Лимиты рабочей области (в мм)
WORKSPACE_LIMITS = {
    "x_min": -300,
    "x_max": 300,
    "y_min": -300,
    "y_max": 300,
    "z_min": 0,
    "z_max": 300
}

# Лимиты углов (в градусах) для серводвигателей
JOINT_LIMITS = [
    [-180, 180],  # лимиты для 1-го сервопривода
    [-180, 180],  # лимиты для 2-го сервопривода
    [-180, 180],  # лимиты для 3-го сервопривода
    [-180, 180],  # лимиты для 4-го сервопривода
    [-180, 180],  # лимиты для 5-го сервопривода
    [-180, 180]   # лимиты для 6-го сервопривода
]

# Домашняя позиция (в мм и градусах)
HOME_POSITION = {
    "x": 0,
    "y": 200,
    "z": 200,
    "roll": 0,
    "pitch": 0,
    "yaw": 0
}

# Положение ожидания (безопасное положение для ожидания)
STANDBY_POSITION = {
    "x": 0,
    "y": 250,
    "z": 250,
    "roll": 0,
    "pitch": 0,
    "yaw": 0
}

# Параметры камеры
CAMERA_INDEX = 0  # индекс камеры (0 для встроенной камеры)
CAMERA_WIDTH = 640  # ширина изображения с камеры
CAMERA_HEIGHT = 480  # высота изображения с камеры
CAMERA_FPS = 30  # частота кадров

# Калибровка камеры (для преобразования координат из пикселей в координаты робота)
# Эти параметры должны быть откалиброваны для конкретной установки
CAMERA_CALIBRATION = {
    "camera_matrix": [
        [1000, 0, 320],
        [0, 1000, 240],
        [0, 0, 1]
    ],
    "distortion_coefficients": [0, 0, 0, 0, 0],
    # Матрица преобразования из координат камеры в координаты робота
    "transform_matrix": [
        [1, 0, 0, 100],  # масштаб и смещение по X
        [0, 1, 0, 100],  # масштаб и смещение по Y
        [0, 0, 1, 500],  # масштаб и смещение по Z
        [0, 0, 0, 1]
    ]
}

# Параметры YOLO для детекции объектов
YOLO_CONFIG = {
    "model_path": "models/yolov4.weights",
    "config_path": "models/yolov4.cfg",
    "classes_path": "models/coco.names",
    "confidence_threshold": 0.5,  # порог уверенности для детекции
    "nms_threshold": 0.4  # порог для подавления не-максимумов
}

# Параметры логирования
LOG_LEVEL = "INFO"  # уровень логирования (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_FILE = "robot_vision.log"  # файл для записи логов

# Пути к файлам SDK
SDK_PATHS = {
    "dll_path": "/path/to/sdk/dll",
    "config_path": "/path/to/sdk/config"
}

# Параметры для сортировки объектов
SORTING_PARAMETERS = {
    # Словарь с координатами для размещения объектов различных классов
    "class_positions": {
        "bottle": {"x": 100, "y": 200, "z": 50},
        "cup": {"x": 0, "y": 200, "z": 50},
        "phone": {"x": -100, "y": 200, "z": 50},
        "default": {"x": -200, "y": 200, "z": 50}  # для неизвестных объектов
    },
    # Высота захвата над объектом
    "grasp_height": 50,
    # Смещение перед захватом для избежания столкновений
    "approach_offset": 100,
    # Время ожидания после захвата (сек)
    "grasp_delay": 0.5
}

# Расширенные параметры компьютерного зрения
VISION_PARAMETERS = {
    # Цветовой диапазон для сегментации (HSV)
    "color_ranges": {
        "red": [(0, 50, 50), (10, 255, 255)],
        "blue": [(110, 50, 50), (130, 255, 255)],
        "green": [(50, 50, 50), (70, 255, 255)]
    },
    # Параметры фильтрации изображения
    "blur_kernel_size": 5,
    # Минимальный размер контура для объекта (пиксели²)
    "min_contour_area": 1000,
    # Включить запись видео
    "record_video": False,
    # Путь для сохранения видео
    "video_output_path": "output_video.avi"
}

# Демонстрационные сценарии
DEMO_SCENARIOS = {
    # Сценарий для демонстрации зрения
    "vision": {
        "duration": 60,  # продолжительность демонстрации (сек)
        "detect_interval": 1.0  # интервал между детекциями (сек)
    },
    # Сценарий для сортировки объектов
    "sorting": {
        "num_objects": 5,  # количество объектов для сортировки
        "max_attempts": 10  # максимальное количество попыток для одного объекта
    }
} 